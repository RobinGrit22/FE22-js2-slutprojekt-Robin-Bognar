var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire0c93;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire0c93=s);var o=s("gdelx"),a=s("fhN3L"),r=s("k8Jq9");s("k8Jq9"),r=s("k8Jq9");const c=(0,a.initializeApp)(r.firebaseConfig),i=(0,o.getDatabase)(c),l=new URLSearchParams(window.location.search).get("userId");async function d(e){return(await(0,o.get)((0,o.ref)(i,`users/${e}`))).val().username}if(l){const e=(0,o.getDatabase)(),t=(0,o.ref)(e,`users/${l}`);(0,o.onValue)(t,(e=>{const t=e.val();console.log("userData:",t);const n=document.getElementById("username"),s=document.getElementById("profileImage");n&&(n.innerText=t.username),s&&(s.src=t.image),u()}));const n=(0,o.ref)(e,"posts");(0,o.onValue)(n,(async e=>{const t=e.val(),n=document.getElementById("postsList");if(t&&n){n.innerHTML="";const e=Object.entries(t).filter((([e,t])=>t.userId===l)).map((([e,t])=>({id:e,...t})));e.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),console.log(e);for(const t of e){const e=await d(t.userId),s=document.createElement("div");s.className="post-item",s.innerHTML=`\n          <h5 class="postName">${e}</h5>\n          <p class="postContent">${t.content}</p>\n          <p class="postTime">${t.createdAt}</p>\n        `,n.appendChild(s)}}}))}else console.log("No user ID provided");const u=async()=>{const e=(0,o.getDatabase)(),t=(0,o.ref)(e,"posts"),n=(await(0,o.get)(t)).val(),s=Object.entries(n).map((([e,t])=>({id:e,userId:t.userId,content:t.content,createdAt:t.createdAt,likes:t.likes})));s.sort(((e,t)=>t.likes-e.likes));const a=s.slice(0,5),r=document.getElementById("top10LikedPosts");if(r){r.innerHTML="";for(const t of a){const n=(await(0,o.get)((0,o.ref)(e,`users/${t.userId}`))).val();if(n){const e=document.createElement("div");e.className="postLiked10",e.innerHTML=`\n          <h5 class="postNameLiked">${n.username}</h5>\n          <p class="postContentLiked">${t.content}</p>\n          <p class="postLikesLiked">Likes: ${t.likes}</p>\n        `,r.appendChild(e)}}}};(0,r.fetchUsers)().then((e=>{console.log("users:",e),console.log(Object.values(e)),Object.entries(e).forEach((([e,t])=>{const n=document.querySelector(".user-names"),s=document.createElement("p");s.setAttribute("data-user-id",e),n?.append(s),s&&(s.innerText=t.username),s.addEventListener("click",(()=>{window.location.href=`./profile.html?userId=${e}`}))}))}));document.querySelector("#loggOutBtn").addEventListener("click",(()=>{(0,r.logOutAccount)().then((()=>{location.assign("../index.html")}))}));document.querySelector("#deleteAccountBtn").addEventListener("click",(()=>{(0,r.deleteAccount)().then((()=>{location.assign("../index.html")}))}));
//# sourceMappingURL=profile.8fb7eca7.js.map
